/**
 * minirefresh - 优雅的H5下拉刷新。零依赖，高性能，多主题，易拓展。
 * @version v1.0.1
 * @author dailc(dailichun@aliyun.com)
 * https://github.com/minirefresh/minirefresh
 */
!function(t,s){var n="minirefresh-theme-taobao",o="minirefresh-downwrap",e="minirefresh-hardware-speedup",r="minirefresh-rotate",i="minirefresh-hidden",a=0,d=1,p=2,h=3,w=800,c="secret-garden-bg-in",l="secret-garden-bg-out",W="secret-garden-moon-in",f="secret-garden-moon-out",m={down:{offset:100,dampRate:.4,successAnim:{isEnable:!1},secretGarden:{isEnable:!0,offset:200,tips:"欢迎光临秘密花园",inSecretGarden:t.noop},isWrapCssTranslate:!0}},u=t.theme.defaults.extend({init:function(s){s=t.extend(!0,{},m,s),this._super(s)},_initDownWrap:function(){var t=this.container,s=this.scrollWrap,r=this.options,i=document.createElement("div");i.className=o+" "+e,i.innerHTML='<div class="downwrap-bg"></div><div class="downwrap-moon"></div><div class="downwrap-content"><p class="downwrap-progress"></p><p class="downwrap-tips">'+r.down.contentdown+"</p></div>",t.insertBefore(i,s),t.classList.add(n),this.downWrap=i,this.downWrapProgress=this.downWrap.querySelector(".downwrap-progress"),this.downWrapTips=this.downWrap.querySelector(".downwrap-tips"),this.downWrapBg=this.downWrap.querySelector(".downwrap-bg"),this.downWrapMoon=this.downWrap.querySelector(".downwrap-moon"),this.pullState=a,this.downWrapHeight=this.downWrap.offsetHeight||w,this._transformDownWrap(-1*this.downWrapHeight)},_transformDownWrap:function(t,s){this._super(t,s)},_rotateDownProgress:function(t){this.downWrapProgress.style.webkitTransform="rotate("+t+"deg)",this.downWrapProgress.style.transform="rotate("+t+"deg)"},_pullHook:function(t,s){var n=this.options,o=n.down,e=o.secretGarden.isEnable,r=o.secretGarden.offset,a=360,w=t/s,c=a*w;this._transformDownWrap(-this.downWrapHeight+t),this._rotateDownProgress(c),t<s?this.pullState!==d&&(this.downWrapBg.classList.remove(l),this.downWrapMoon.classList.remove(f),this.downWrapTips.classList.remove(i),this.downWrapProgress.classList.remove(i),this.downWrapTips.innerText=o.contentdown,this.pullState=d):t>=s&&(!e||t<r)?this.pullState!==p&&(this.downWrapTips.classList.remove(i),this.downWrapProgress.classList.remove(i),this.downWrapTips.innerText=o.contentover,this.pullState=p):this.pullState!==h&&(this.downWrapTips.classList.remove(i),this.downWrapProgress.classList.add(i),this.downWrapTips.innerText=o.secretGarden.tips,this.pullState=h)},_beforeDownLoadingHook:function(t,s){return this.pullState!==h||(this._inSecretGarden(),!1)},_downLoaingHook:function(){this.downWrapTips.innerText=this.options.down.contentrefresh,this.downWrapProgress.classList.add(r),this._transformDownWrap(-this.downWrapHeight+this.options.down.offset,this.options.down.bounceTime)},_downLoaingSuccessHook:function(){},_downLoaingEndHook:function(t){this.downWrapTips.innerText=this.options.down.contentdown,this.downWrapProgress.classList.remove(r),this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),this.pullState=a},_cancelLoaingHook:function(){this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),this.pullState=a},_secretGardenAnimation:function(t){var s=t?c:l,n=t?l:c,o=t?W:f,e=t?f:W;this.downWrapBg.classList.remove(n),this.downWrapBg.classList.add(s),this.downWrapMoon.classList.remove(e),this.downWrapMoon.classList.add(o)},_inSecretGarden:function(){var t=this.options.down.bounceTime,s=this.options.down.secretGarden.inSecretGarden;this.downWrapTips.classList.add(i),this.scroller.translateScrollWrap(this.scrollWrap.clientHeight,t),this._transformDownWrap(this.scrollWrap.clientHeight-this.downWrapHeight,t),this._secretGardenAnimation(!0),s&&s()},resetSecretGarden:function(){var t=this.options.down.bounceTime;this.scroller.translateScrollWrap(0,t),this._transformDownWrap(-1*this.downWrapHeight,t),this._secretGardenAnimation(!1),this.pullState=a}});t.namespace("theme.taobao",u),s.MiniRefresh=u}(MiniRefreshTools,"undefined"!=typeof window?window:global);